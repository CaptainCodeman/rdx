!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).store={})}(this,(function(t){"use strict";const e="dispatch",s="state",n=Symbol(),i=Symbol(),o=Symbol(),a=Symbol(),c=Symbol(),r=Symbol(),d=Symbol();class h extends EventTarget{constructor(t,e){super(),this.state=t,this.reducer=e,this.state=this.reducer(this.state,{})}dispatch(t){const n=new CustomEvent(e,{cancelable:!0,detail:{action:t}});return this.dispatchEvent(n)&&(t=n.detail.action,this.state=this.reducer(this.state,t),this.dispatchEvent(new CustomEvent(s,{detail:{action:t}}))),t}}t.Store=h,t.combineReducers=function(t){return(e={},s)=>{for(const n in t)e[n]=t[n](e[n],s);return e}},t.connect=function(t,e){return class extends e{constructor(...t){super(...t),this[d]=this[d].bind(this),this[i]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[o](),this[c]()}disconnectedCallback(){this[r](),this[a](),super.disconnectedCallback&&super.disconnectedCallback()}[i](){if(this[n]={},this.mapEvents){const e=this.mapEvents();for(const s in e){const i=e[s];this[n][s]=function(e){t.dispatch(i(e))}.bind(this)}}}[o](){for(const t in this[n])this.addEventListener(t,this[n][t],!1)}[a](){for(const t in this[n])this.removeEventListener(t,this[n][t],!1)}[c](){t.addEventListener(s,this[d]),this[d]()}[r](){this.removeEventListener(s,this[d])}[d](){this.mapState&&Object.assign(this,this.mapState(t.state))}}},t.devtools=function(t){const e=window.__REDUX_DEVTOOLS_EXTENSION__;if(e){const n=e.connect();let i=!1;t.addEventListener(s,e=>{const{action:s}=e.detail;i?i=!1:n.send(s,t.state)}),n.subscribe(e=>{"DISPATCH"===e.type&&e.state&&(i=!0,t.state=JSON.parse(e.state),t.dispatch({}))}),n.init(t.state)}return t},t.persist=function(t,e){const n={name:location.hostname,filter:t=>!0,persist:t=>t,delay:0,...e},i=localStorage.getItem(n.name);i&&(t.state={...t.state,...JSON.parse(i)});let o=0;return t.addEventListener(s,e=>{const s=e,{action:i}=s.detail;n.filter(i)&&(o&&window.clearTimeout(o),o=window.setTimeout(()=>{localStorage.setItem(n.name,JSON.stringify(n.persist(t.state))),o=0},n.delay))}),t},t.thunk=function(t){const s=t.dispatch.bind(t);return t.addEventListener(e,e=>{const n=e,{action:i}=n.detail;if("function"==typeof i){i(s,t.state),n.stopImmediatePropagation(),n.preventDefault()}}),t}}));
